# Requirements Document

## Introduction

This feature enables the integration of interactive flipbook publications (generated by FlipbookHTML) into the Publications Room. The flipbook provides a realistic page-turning experience with all necessary JavaScript, CSS, and image assets bundled together. This enhancement will allow users to view publications in an engaging, magazine-style format on the kiosk touchscreen.

## Glossary

- **Flipbook**: An interactive HTML5-based publication viewer that simulates realistic page-turning animations
- **FlipbookHTML**: A third-party tool that generates self-contained flipbook packages with HTML, CSS, JavaScript, and image assets
- **Publications Room**: The existing application page that displays publication records from the database
- **Kiosk Application**: The touchscreen-enabled application running in fullscreen mode
- **Publication Record**: A database entry containing metadata about a publication (title, author, year, etc.)

## Requirements

### Requirement 1

**User Story:** As a kiosk user, I want to view publications in an interactive flipbook format, so that I can experience a realistic page-turning interface on the touchscreen.

#### Acceptance Criteria

1. WHEN a publication record has an associated flipbook, THE Kiosk Application SHALL display a "View Flipbook" option alongside the existing PDF viewer option
2. WHEN the user selects the flipbook option, THE Kiosk Application SHALL load and display the flipbook in fullscreen mode
3. WHEN the flipbook is displayed, THE Kiosk Application SHALL support touch gestures for page navigation (swipe left/right)
4. WHEN the flipbook is displayed, THE Kiosk Application SHALL provide visible navigation controls (previous/next buttons, page counter)
5. WHEN the user closes the flipbook, THE Kiosk Application SHALL return to the Publications Room view

### Requirement 2

**User Story:** As a system administrator, I want to easily add flipbook files to the application, so that I can deploy new interactive publications without modifying code.

#### Acceptance Criteria

1. THE Kiosk Application SHALL store flipbook packages in a dedicated directory structure under public/flipbooks/
2. WHEN a flipbook package is added to the directory, THE Kiosk Application SHALL make it accessible via a predictable URL pattern
3. THE Kiosk Application SHALL support flipbook packages that include HTML, CSS, JavaScript, and image assets
4. THE Kiosk Application SHALL preserve the original flipbook directory structure and file references
5. WHERE a publication record references a flipbook, THE Kiosk Application SHALL link the database record to the flipbook via a file path or identifier

### Requirement 3

**User Story:** As a developer, I want the flipbook integration to follow the existing component architecture, so that the code remains maintainable and consistent with the rest of the application.

#### Acceptance Criteria

1. THE Kiosk Application SHALL create a reusable FlipbookViewer component in the src/components directory
2. THE FlipbookViewer component SHALL accept props for flipbook URL, title, and close handler
3. THE FlipbookViewer component SHALL use an iframe to embed the flipbook HTML content
4. THE FlipbookViewer component SHALL provide a consistent header with title, close button, and navigation controls
5. THE FlipbookViewer component SHALL integrate with the existing RecordDetail component for seamless user experience

### Requirement 4

**User Story:** As a kiosk user, I want the flipbook to load quickly and perform smoothly, so that I can browse publications without delays or lag.

#### Acceptance Criteria

1. WHEN a flipbook is opened, THE Kiosk Application SHALL display a loading indicator while the flipbook initializes
2. THE Kiosk Application SHALL load flipbook assets from the local filesystem (not external URLs)
3. WHEN the flipbook is displayed, THE Kiosk Application SHALL maintain a frame rate of at least 30 FPS during page transitions
4. THE Kiosk Application SHALL preload critical flipbook assets to minimize initial load time
5. WHERE flipbook assets are large, THE Kiosk Application SHALL provide progress feedback during loading

### Requirement 5

**User Story:** As a system administrator, I want to configure which publications use flipbooks versus PDFs, so that I can control the viewing experience for different publication types.

#### Acceptance Criteria

1. THE Kiosk Application SHALL support a flipbook_path field in the publication database schema
2. WHEN a publication record has both pdf_path and flipbook_path, THE Kiosk Application SHALL display both viewing options
3. WHEN a publication record has only flipbook_path, THE Kiosk Application SHALL display only the flipbook option
4. THE Kiosk Application SHALL validate that flipbook paths point to existing directories
5. WHERE a flipbook path is invalid, THE Kiosk Application SHALL display an error message and fallback to PDF if available
