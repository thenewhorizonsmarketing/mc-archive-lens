# Flipbook Integration Manual Testing Guide

This guide provides step-by-step instructions for manually testing the flipbook integration feature.

## Prerequisites

Before starting manual testing, ensure you have:

1. A sample flipbook package (HTML5 flipbook generated by FlipbookHTML or similar tool)
2. Access to the database to add test publication records
3. The application running in development or production mode
4. (Optional) A touchscreen device for touch interaction testing

## Test Setup

### 1. Place Sample Flipbook

Create a sample flipbook directory structure:

```bash
mkdir -p public/flipbooks/test-publication
```

Place your flipbook files in this directory:
- `public/flipbooks/test-publication/index.html` (main flipbook file)
- `public/flipbooks/test-publication/css/` (stylesheets)
- `public/flipbooks/test-publication/js/` (JavaScript files)
- `public/flipbooks/test-publication/images/` (page images)

### 2. Add Test Publication Record

Add a test publication to the database with a flipbook_path:

```sql
INSERT INTO publications (
  title,
  pub_name,
  issue_date,
  volume_issue,
  flipbook_path,
  pdf_path,
  description
) VALUES (
  'Test Publication - Flipbook Integration',
  'Amicus',
  '2024-01',
  'Vol 1, Issue 1',
  '/flipbooks/test-publication/index.html',
  NULL,
  'Test publication for flipbook integration testing'
);
```

### 3. Add Test Publication with Both Flipbook and PDF

```sql
INSERT INTO publications (
  title,
  pub_name,
  issue_date,
  volume_issue,
  flipbook_path,
  pdf_path,
  description
) VALUES (
  'Test Publication - Both Viewers',
  'Law Review',
  '2024-02',
  'Vol 2, Issue 1',
  '/flipbooks/test-publication/index.html',
  '/pdfs/publications/sample-publication.pdf',
  'Test publication with both flipbook and PDF options'
);
```

## Manual Test Cases

### Test Case 1: View Flipbook from Publications Room

**Requirements:** 1.1, 1.2

**Steps:**
1. Navigate to the Publications Room
2. Search for "Test Publication - Flipbook Integration"
3. Click on the publication to open RecordDetail
4. Verify "View Flipbook" button is visible
5. Click "View Flipbook" button
6. Verify flipbook opens in fullscreen mode
7. Verify flipbook content loads correctly

**Expected Results:**
- ✓ "View Flipbook" button is displayed
- ✓ Flipbook opens in fullscreen overlay
- ✓ Flipbook content is visible and interactive
- ✓ Loading indicator appears during load
- ✓ Loading indicator disappears when loaded

### Test Case 2: Close Flipbook and Return to Publications

**Requirements:** 1.2, 1.4

**Steps:**
1. Open a flipbook (follow Test Case 1)
2. Click the "Close" button in the header
3. Verify flipbook closes
4. Verify you return to the RecordDetail view

**Expected Results:**
- ✓ Close button is visible and accessible
- ✓ Clicking close button closes the flipbook
- ✓ RecordDetail view is still visible after closing
- ✓ No errors in console

### Test Case 3: Close Flipbook with Escape Key

**Requirements:** 1.4, 1.5

**Steps:**
1. Open a flipbook (follow Test Case 1)
2. Press the Escape key on keyboard
3. Verify flipbook closes

**Expected Results:**
- ✓ Escape key closes the flipbook
- ✓ Returns to RecordDetail view
- ✓ No errors in console

### Test Case 4: Touch Gestures (Touchscreen Device)

**Requirements:** 1.3

**Steps:**
1. Open a flipbook on a touchscreen device
2. Try swiping left/right to navigate pages
3. Try tapping navigation controls
4. Try pinch-to-zoom gestures

**Expected Results:**
- ✓ Touch gestures work within the flipbook
- ✓ Page navigation responds to swipes
- ✓ Navigation controls are touch-friendly
- ✓ Zoom gestures work (if supported by flipbook)

### Test Case 5: Both Flipbook and PDF Options

**Requirements:** 5.2, 5.3

**Steps:**
1. Navigate to Publications Room
2. Search for "Test Publication - Both Viewers"
3. Click on the publication
4. Verify both "View Flipbook" and "View PDF" buttons are visible
5. Click "View Flipbook" button
6. Verify flipbook opens
7. Close flipbook
8. Click "View PDF" button
9. Verify PDF opens

**Expected Results:**
- ✓ Both buttons are displayed
- ✓ Both buttons are functional
- ✓ Can switch between viewers
- ✓ No conflicts between viewers

### Test Case 6: Flipbook-Only Publication

**Requirements:** 5.2, 5.3

**Steps:**
1. Navigate to Publications Room
2. Search for "Test Publication - Flipbook Integration"
3. Click on the publication
4. Verify only "View Flipbook" button is visible
5. Verify no "View PDF" button is shown

**Expected Results:**
- ✓ Only "View Flipbook" button is displayed
- ✓ No "View PDF" button
- ✓ Flipbook opens correctly

### Test Case 7: Error Handling - Invalid Flipbook Path

**Requirements:** 5.4, 5.5

**Steps:**
1. Add a publication with invalid flipbook_path:
   ```sql
   INSERT INTO publications (title, pub_name, flipbook_path)
   VALUES ('Invalid Flipbook', 'Amicus', '/invalid/path.html');
   ```
2. Navigate to the publication
3. Click "View Flipbook" button
4. Verify error message is displayed

**Expected Results:**
- ✓ Error message is displayed
- ✓ Error message is user-friendly
- ✓ No application crash
- ✓ Can close error and return to list

### Test Case 8: Error Handling - Flipbook Load Failure

**Requirements:** 5.5

**Steps:**
1. Add a publication with a flipbook_path that points to a non-existent file
2. Navigate to the publication
3. Click "View Flipbook" button
4. Wait for load attempt
5. Verify error message is displayed

**Expected Results:**
- ✓ Loading indicator appears initially
- ✓ Error message appears after load failure
- ✓ Error message explains the issue
- ✓ Can close error and return to list

### Test Case 9: PDF Fallback on Flipbook Error

**Requirements:** 5.5

**Steps:**
1. Add a publication with invalid flipbook_path but valid pdf_path
2. Navigate to the publication
3. Click "View Flipbook" button
4. Wait for error
5. Verify "View PDF Instead" button is shown
6. Click "View PDF Instead" button
7. Verify PDF opens

**Expected Results:**
- ✓ Error message is displayed
- ✓ "View PDF Instead" button is visible
- ✓ Clicking button opens PDF viewer
- ✓ PDF displays correctly

### Test Case 10: Loading Performance

**Requirements:** 4.1, 4.2, 4.3

**Steps:**
1. Open a flipbook
2. Observe loading time
3. Observe page transition smoothness
4. Check browser console for performance warnings

**Expected Results:**
- ✓ Flipbook loads in < 2 seconds (for typical size)
- ✓ Loading progress indicator is shown
- ✓ Page transitions are smooth (≥ 30 FPS)
- ✓ No performance warnings in console

### Test Case 11: Accessibility - Screen Reader

**Requirements:** 1.5

**Steps:**
1. Enable screen reader (VoiceOver on Mac, NVDA on Windows)
2. Navigate to Publications Room
3. Navigate to a publication with flipbook
4. Activate "View Flipbook" button
5. Listen to screen reader announcements

**Expected Results:**
- ✓ "View Flipbook" button is announced
- ✓ Flipbook opening is announced
- ✓ Close button is announced
- ✓ Escape key hint is announced

### Test Case 12: Accessibility - Keyboard Navigation

**Requirements:** 1.5

**Steps:**
1. Navigate to Publications Room using only keyboard
2. Tab to a publication with flipbook
3. Press Enter to open RecordDetail
4. Tab to "View Flipbook" button
5. Press Enter to open flipbook
6. Press Escape to close
7. Verify focus returns appropriately

**Expected Results:**
- ✓ Can navigate to flipbook button with Tab
- ✓ Can activate button with Enter
- ✓ Can close with Escape
- ✓ Focus management is correct
- ✓ No keyboard traps

### Test Case 13: Body Scroll Prevention

**Requirements:** 1.5

**Steps:**
1. Open a flipbook
2. Try scrolling the page with mouse wheel
3. Try scrolling with keyboard (arrow keys, page up/down)
4. Close flipbook
5. Try scrolling again

**Expected Results:**
- ✓ Page scroll is prevented when flipbook is open
- ✓ Flipbook content can still scroll (if applicable)
- ✓ Page scroll is restored after closing
- ✓ No scroll position jump

### Test Case 14: Multiple Open/Close Cycles

**Requirements:** 1.1, 1.2

**Steps:**
1. Open a flipbook
2. Close it
3. Open it again
4. Close it
5. Repeat 5 times
6. Check for memory leaks or performance degradation

**Expected Results:**
- ✓ Flipbook opens consistently each time
- ✓ No memory leaks
- ✓ No performance degradation
- ✓ No console errors

### Test Case 15: Responsive Design

**Requirements:** 1.1, 1.2

**Steps:**
1. Open flipbook on desktop (1920x1080)
2. Verify layout
3. Open flipbook on tablet (768x1024)
4. Verify layout
5. Open flipbook on mobile (375x667)
6. Verify layout

**Expected Results:**
- ✓ Flipbook is fullscreen on all devices
- ✓ Controls are accessible on all devices
- ✓ Touch targets are appropriate size
- ✓ No layout overflow or clipping

## Performance Validation

### Metrics to Measure

1. **Initial Load Time**
   - Target: < 2 seconds for typical flipbook
   - Measure: Time from button click to flipbook display

2. **Frame Rate**
   - Target: ≥ 30 FPS during page transitions
   - Measure: Use browser DevTools Performance tab

3. **Memory Usage**
   - Target: No memory leaks
   - Measure: Use browser DevTools Memory profiler

4. **Asset Loading**
   - Target: Progressive loading of images
   - Measure: Network tab in DevTools

### Performance Testing Steps

1. Open browser DevTools
2. Go to Performance tab
3. Start recording
4. Open flipbook
5. Navigate through a few pages
6. Close flipbook
7. Stop recording
8. Analyze results

**Expected Results:**
- ✓ No long tasks (> 50ms)
- ✓ Smooth frame rate
- ✓ Efficient asset loading
- ✓ No memory leaks

## Test Results Template

Use this template to document your test results:

```markdown
## Test Session: [Date]

**Tester:** [Name]
**Environment:** [Browser, OS, Device]
**Flipbook Sample:** [Description]

### Test Results

| Test Case | Status | Notes |
|-----------|--------|-------|
| TC1: View Flipbook | ✓ Pass / ✗ Fail | |
| TC2: Close Flipbook | ✓ Pass / ✗ Fail | |
| TC3: Escape Key | ✓ Pass / ✗ Fail | |
| TC4: Touch Gestures | ✓ Pass / ✗ Fail | |
| TC5: Both Options | ✓ Pass / ✗ Fail | |
| TC6: Flipbook Only | ✓ Pass / ✗ Fail | |
| TC7: Invalid Path | ✓ Pass / ✗ Fail | |
| TC8: Load Failure | ✓ Pass / ✗ Fail | |
| TC9: PDF Fallback | ✓ Pass / ✗ Fail | |
| TC10: Performance | ✓ Pass / ✗ Fail | |
| TC11: Screen Reader | ✓ Pass / ✗ Fail | |
| TC12: Keyboard Nav | ✓ Pass / ✗ Fail | |
| TC13: Scroll Prevention | ✓ Pass / ✗ Fail | |
| TC14: Multiple Cycles | ✓ Pass / ✗ Fail | |
| TC15: Responsive | ✓ Pass / ✗ Fail | |

### Performance Metrics

- Initial Load Time: [X] seconds
- Frame Rate: [X] FPS
- Memory Usage: [X] MB
- Asset Load Time: [X] seconds

### Issues Found

1. [Issue description]
2. [Issue description]

### Recommendations

1. [Recommendation]
2. [Recommendation]
```

## Troubleshooting

### Flipbook Not Loading

**Symptoms:** Blank screen or error message

**Possible Causes:**
1. Incorrect flipbook_path in database
2. Missing flipbook files
3. Incorrect file permissions
4. CORS issues (if loading from external source)

**Solutions:**
1. Verify flipbook_path matches actual file location
2. Check that all flipbook files are present
3. Ensure files are readable by web server
4. Serve flipbook from same origin

### Flipbook Loads But Doesn't Work

**Symptoms:** Flipbook displays but interactions don't work

**Possible Causes:**
1. JavaScript errors in flipbook code
2. Missing dependencies
3. Incompatible flipbook version
4. Browser compatibility issues

**Solutions:**
1. Check browser console for errors
2. Verify all flipbook assets are loaded
3. Test with different flipbook package
4. Test in different browsers

### Performance Issues

**Symptoms:** Slow loading or laggy interactions

**Possible Causes:**
1. Large flipbook file size
2. Too many high-resolution images
3. Network latency
4. Browser resource constraints

**Solutions:**
1. Optimize flipbook images
2. Use progressive loading
3. Test on local server
4. Close other browser tabs

## Conclusion

After completing all test cases, document your findings and any issues discovered. Share the test results with the development team for review and any necessary fixes.

**Sign-off:**

- [ ] All test cases executed
- [ ] Performance metrics validated
- [ ] Issues documented
- [ ] Recommendations provided
- [ ] Ready for production deployment

**Tester Signature:** _________________ **Date:** _________
