# Flipbooks Directory

This directory contains interactive flipbook publications generated by FlipbookHTML or similar tools. Each flipbook is a self-contained package with HTML, CSS, JavaScript, and image assets.

## Directory Structure

Each flipbook should be placed in its own subdirectory with all required assets:

```
flipbooks/
├── amicus-2024-spring/          # Example flipbook package
│   ├── index.html               # Entry point (required)
│   ├── css/                     # Stylesheets
│   │   ├── flipbook.css
│   │   └── theme.css
│   ├── js/                      # JavaScript files
│   │   ├── flipbook.min.js
│   │   └── config.js
│   └── images/                  # Page images
│       ├── page-001.jpg
│       ├── page-002.jpg
│       └── ...
└── law-review-vol-45/           # Another example
    └── ...
```

## Adding a New Flipbook

### Step 1: Export from FlipbookHTML

1. Generate your flipbook using FlipbookHTML or your preferred tool
2. Export the complete package including all assets
3. Ensure the package includes an `index.html` entry point

### Step 2: Copy to Flipbooks Directory

1. Create a new subdirectory with a descriptive name (use kebab-case):
   ```bash
   mkdir public/flipbooks/your-publication-name
   ```

2. Copy all flipbook files into the new directory:
   ```bash
   cp -r /path/to/exported/flipbook/* public/flipbooks/your-publication-name/
   ```

3. Verify the structure includes `index.html` at the root of the subdirectory

### Step 3: Update Database

Add or update the publication record in the database to reference the flipbook:

```sql
-- For new publications
INSERT INTO publications (title, pub_name, issue_date, volume_issue, flipbook_path)
VALUES (
  'Your Publication Title',
  'Amicus',  -- or 'Legal Eye', 'Law Review', 'Directory'
  '2024-03',
  'Vol 45, Issue 1',
  '/flipbooks/your-publication-name/index.html'
);

-- For existing publications
UPDATE publications 
SET flipbook_path = '/flipbooks/your-publication-name/index.html'
WHERE id = [publication_id];
```

### Step 4: Verify

1. Navigate to the Publications Room in the kiosk application
2. Search for your publication
3. Open the publication detail view
4. Click "View Flipbook" to verify it loads correctly

## Naming Conventions

Use descriptive, kebab-case directory names that identify the publication:

- `amicus-2024-spring`
- `law-review-vol-45-issue-2`
- `legal-eye-fall-2023`
- `alumni-directory-2024`

## File Path Format

The `flipbook_path` in the database should always follow this format:

```
/flipbooks/[directory-name]/index.html
```

Examples:
- `/flipbooks/amicus-2024-spring/index.html`
- `/flipbooks/law-review-vol-45-issue-2/index.html`

## Asset Requirements

### Required Files

- `index.html` - Main entry point (must be at root of flipbook directory)

### Typical Assets

- CSS files for styling
- JavaScript files for flipbook functionality
- Image files for pages (JPG, PNG, WebP)
- Font files (if custom fonts are used)
- Configuration files

### File Size Considerations

- Individual flipbooks can range from 10-50MB depending on page count and image quality
- Optimize images before export to reduce load times
- Consider using compressed image formats (WebP, optimized JPG)

## Batch Import

For importing multiple flipbooks at once:

1. Create a CSV file with publication metadata and flipbook paths:
   ```csv
   title,pub_name,issue_date,volume_issue,flipbook_path
   "Amicus Spring 2024","Amicus","2024-03","Vol 45, Issue 1","/flipbooks/amicus-2024-spring/index.html"
   "Law Review Vol 45","Law Review","2024-01","Vol 45, Issue 1","/flipbooks/law-review-vol-45/index.html"
   ```

2. Use the admin panel's CSV import feature to batch update records

## Troubleshooting

### Flipbook Won't Load

- Verify `index.html` exists at the root of the flipbook directory
- Check that the `flipbook_path` in the database matches the actual file location
- Ensure all asset paths in `index.html` are relative (not absolute URLs)
- Check browser console for JavaScript errors

### Missing Images or Assets

- Verify all referenced assets are included in the flipbook directory
- Check that asset paths in HTML/CSS/JS are relative to `index.html`
- Ensure file names match exactly (case-sensitive on some systems)

### Performance Issues

- Optimize images before export (reduce resolution, compress)
- Consider using progressive JPG or WebP format
- Reduce page count for very large publications
- Test on target kiosk hardware

## Best Practices

1. **Self-Contained Packages**: Each flipbook should be completely self-contained with no external dependencies
2. **Relative Paths**: All asset references should use relative paths
3. **Consistent Naming**: Use clear, descriptive directory names
4. **Version Control**: Keep original source files separate from deployed flipbooks
5. **Testing**: Always test flipbooks on the actual kiosk hardware before deployment
6. **Backup**: Keep backups of flipbook packages before making changes

## Security Notes

- Flipbooks are served from the public directory and accessible to all users
- Do not include sensitive information in flipbook files
- Flipbooks run in a sandboxed iframe for security
- JavaScript in flipbooks has limited access to the parent application

## Support

For issues or questions about flipbook integration, refer to:
- Design document: `.kiro/specs/flipbook-integration/design.md`
- Requirements document: `.kiro/specs/flipbook-integration/requirements.md`
- Developer documentation in `docs/` directory
