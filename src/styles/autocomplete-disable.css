/**
 * Disable Browser Autocomplete Dropdowns
 * Prevents layout shifts from browser autocomplete suggestions
 */

/* Disable all browser autocomplete UI */
input[autocomplete="off"]::-webkit-contacts-auto-fill-button,
input[autocomplete="off"]::-webkit-credentials-auto-fill-button {
  visibility: hidden;
  display: none !important;
  pointer-events: none;
  height: 0;
  width: 0;
  margin: 0;
}

/* Hide Chrome autofill dropdown */
input:-webkit-autofill,
input:-webkit-autofill:hover,
input:-webkit-autofill:focus,
input:-webkit-autofill:active {
  -webkit-box-shadow: 0 0 0 30px white inset !important;
  box-shadow: 0 0 0 30px white inset !important;
}

/* Disable Safari autofill */
input::-webkit-textfield-decoration-container {
  visibility: hidden;
  pointer-events: none;
}

/* Hide password manager icons */
input::-ms-reveal,
input::-ms-clear {
  display: none;
}

/* Prevent autocomplete dropdown from appearing */
input[type="text"],
input[type="search"],
input[type="email"],
input[type="tel"],
input[type="url"] {
  /* Disable browser autocomplete */
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}

/* Hide datalist dropdown */
input::-webkit-calendar-picker-indicator {
  display: none;
  -webkit-appearance: none;
}

/* Prevent form autofill UI */
form[autocomplete="off"] input,
input[autocomplete="off"],
input[data-form-type="other"] {
  /* Additional layer of autocomplete prevention */
  background-color: transparent !important;
}

/* Hide LastPass, 1Password, and other password manager icons */
input[data-lpignore="true"] {
  background-image: none !important;
  background-position: 0 0 !important;
  background-repeat: no-repeat !important;
}

/* Prevent iOS autocorrect bar from appearing */
input[autocorrect="off"],
input[autocapitalize="off"],
input[spellcheck="false"] {
  -webkit-user-modify: read-write-plaintext-only;
}

/* Hide any floating autocomplete panels */
div[role="listbox"],
div[role="combobox"],
ul[role="listbox"] {
  /* Only hide if it's a browser autocomplete, not our custom ones */
  &:not([data-custom-dropdown]) {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    pointer-events: none !important;
    position: absolute !important;
    top: -9999px !important;
    left: -9999px !important;
  }
}

/* Prevent Chrome's address bar dropdown */
input[type="text"]:focus,
input[type="search"]:focus {
  /* Prevent dropdown from triggering */
  outline: none;
}

/* Hide browser's search suggestions */
input[type="search"]::-webkit-search-decoration,
input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-results-button,
input[type="search"]::-webkit-search-results-decoration {
  display: none;
}

/* Prevent Edge's clear button */
input::-ms-clear {
  display: none;
  width: 0;
  height: 0;
}

/* Prevent IE's clear button */
input::-ms-reveal {
  display: none;
  width: 0;
  height: 0;
}

/* Additional layer - hide any absolute positioned dropdowns near inputs */
input + div[style*="position: absolute"],
input + div[style*="position: fixed"] {
  /* Only target browser-generated dropdowns */
  &:not([data-custom-dropdown]):not([class*="custom"]):not([class*="keyboard"]):not([class*="suggestion"]) {
    display: none !important;
    visibility: hidden !important;
  }
}

/* Prevent layout shift from autocomplete */
input {
  /* Reserve no space for autocomplete UI */
  margin-bottom: 0 !important;
  padding-bottom: 0 !important;
}

/* Ensure input container doesn't expand */
.relative:has(input[autocomplete="off"]) {
  /* Prevent container from expanding */
  overflow: visible;
  contain: layout;
}

/* Mobile-specific autocomplete prevention */
@media (max-width: 768px) {
  /* Prevent mobile browser autocomplete */
  input[type="text"],
  input[type="search"] {
    font-size: 16px !important; /* Prevents iOS zoom */
    -webkit-text-size-adjust: 100%;
    -webkit-tap-highlight-color: transparent;
  }
  
  /* Hide mobile autocomplete dropdowns */
  input:focus {
    /* Prevent mobile autocomplete UI */
    -webkit-user-select: text;
    user-select: text;
  }
}

/* Prevent autocomplete from causing reflow */
* {
  /* Ensure autocomplete doesn't trigger layout recalculation */
  &:has(input[autocomplete="off"]) {
    contain: layout style;
  }
}

/* Force hide any browser-generated autocomplete UI */
input:-webkit-autofill + *,
input:-moz-autofill + * {
  display: none !important;
}

/* Prevent Chrome's "Show all saved addresses" dropdown */
input[autocomplete="off"]::after,
input[autocomplete="off"]::before {
  content: none !important;
  display: none !important;
}


/* ===== Force Hide Top Dropdowns ===== */

/* Hide any absolutely positioned dropdowns at the top of the page */
body > div[style*="position: absolute"][style*="top"],
body > div[style*="position: fixed"][style*="top"],
html > div[style*="position: absolute"][style*="top"],
html > div[style*="position: fixed"][style*="top"] {
  /* Only hide if it looks like an autocomplete dropdown */
  &:not([id]):not([class*="modal"]):not([class*="dialog"]):not([class*="toast"]):not([role="dialog"]) {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    pointer-events: none !important;
  }
}

/* Hide Chrome's autocomplete panel that appears at top */
div[style*="position: absolute"][style*="z-index"] {
  /* Target browser-generated dropdowns */
  &:not([data-custom]):not([class]):not([id]) {
    display: none !important;
    visibility: hidden !important;
  }
}

/* Force hide any white bars at the top */
body > div:first-child:not([id]):not([class]) {
  display: none !important;
}

/* Hide browser-generated suggestion panels */
[role="listbox"]:not([data-custom-dropdown]),
[role="combobox"]:not([data-custom-dropdown]) {
  display: none !important;
  visibility: hidden !important;
  position: absolute !important;
  top: -9999px !important;
  left: -9999px !important;
}

/* Prevent any element from appearing at the very top */
*[style*="top: 0"][style*="position: absolute"],
*[style*="top: 0"][style*="position: fixed"] {
  /* Only hide if it's not part of our app */
  &:not([data-app]):not([class*="search"]):not([class*="modal"]):not([class*="dialog"]) {
    display: none !important;
  }
}


/* ===== Nuclear Option - Hide All Top Elements ===== */

/* Hide any white bars at the very top */
body > *:first-child:not(#root):not([data-app]):not([class*="app"]) {
  display: none !important;
}

/* Hide any element positioned at the very top */
*[style*="top: 0px"]:not([data-app]):not([class*="search"]):not([class*="modal"]) {
  display: none !important;
}

/* Hide any white background elements at top */
*[style*="background: white"]:not([data-app]):not([class*="search"]):not([class*="modal"]),
*[style*="background-color: white"]:not([data-app]):not([class*="search"]):not([class*="modal"]),
*[style*="background: #fff"]:not([data-app]):not([class*="search"]):not([class*="modal"]),
*[style*="background-color: #fff"]:not([data-app]):not([class*="search"]):not([class*="modal"]) {
  display: none !important;
}

/* Hide any absolutely positioned elements at top with white background */
*[style*="position: absolute"][style*="top: 0"][style*="background"] {
  display: none !important;
}

/* Hide browser-generated elements */
*:not([class]):not([id]) {
  /* Only if it's positioned at top */
  &[style*="position: absolute"][style*="top: 0"] {
    display: none !important;
  }
}

/* Force hide any element that appears above our app */
*[style*="z-index"][style*="position: absolute"]:not([data-app]):not([class*="search"]):not([class*="modal"]) {
  /* If it's at the top of the page */
  &[style*="top: 0"] {
    display: none !important;
  }
}
